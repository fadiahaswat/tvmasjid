<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Masjid - Mu'allimin Royal Display</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700;800&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Outfit', 'sans-serif'], serif: ['Amiri', 'serif'], mono: ['JetBrains Mono', 'monospace'], cinzel: ['Cinzel', 'serif'] },
                    colors: { 
                        dark: { 900: '#020402', 800: '#0a0f0a', card: '#111111' },
                        brand: { 400: '#34d399', 500: '#10b981', 600: '#059669', 900: '#064e3b' }, 
                        gold: { 100: '#fbf5c4', 300: '#f0d865', 400: '#d4af37', 500: '#b4941f', 600: '#856404' } // New Gold Palette
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'float': 'float 8s ease-in-out infinite',
                        'spin-slow': 'spin 30s linear infinite',
                        'shimmer': 'shimmer 3s linear infinite',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'scale(0.95) translateY(20px)' }, '100%': { opacity: '1', transform: 'scale(1) translateY(0)' } },
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-15px)' } },
                        shimmer: { '0%': { backgroundPosition: '-1000px 0' }, '100%': { backgroundPosition: '1000px 0' } }
                    },
                    backgroundImage: {
                        'gradient-gold': 'linear-gradient(135deg, #fbf5c4 0%, #d4af37 50%, #856404 100%)',
                        'gradient-dark': 'radial-gradient(circle at center, #1a2e1a 0%, #000000 100%)'
                    }
                }
            }
        }
    </script>

    <style>
        /* BASE & TEXTURE */
        body { background-color: #020402; color: #ffffff; overflow: hidden; font-family: 'Outfit', sans-serif; }
        
        .islamic-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4af37' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            position: fixed; inset: 0; z-index: -1; pointer-events: none;
        }

        /* GLASS & BORDERS */
        .glass-panel {
            background: rgba(10, 15, 10, 0.6);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(212, 175, 55, 0.15); /* Gold border subtly */
            box-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.9), inset 0 0 30px rgba(0,0,0,0.5);
        }
        
        .glass-panel-heavy {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(40px);
            border-top: 1px solid rgba(212, 175, 55, 0.3);
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
        }

        /* TYPOGRAPHY LUXURY */
        .text-gold-gradient {
            background: linear-gradient(to bottom, #fbf5c4, #d4af37, #b4941f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(212, 175, 55, 0.2);
        }
        
        .text-glow-gold { text-shadow: 0 0 20px rgba(212, 175, 55, 0.4); }
        .text-glow-white { text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); }

        /* UTILS */
        .hidden-slide { display: none !important; }
        .main-layout { display: grid; grid-template-rows: auto 1fr auto; height: 100vh; padding: 2vh; gap: 2vh; }
        
        /* FOOTER SCHEDULE STYLING */
        #footer-schedule { display: grid; grid-template-columns: repeat(8, 1fr); gap: 1rem; height: 100%; width: 100%; }
        .schedule-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            border-radius: 0.75rem; border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .schedule-item.active {
            background: linear-gradient(180deg, rgba(212, 175, 55, 0.2) 0%, rgba(0,0,0,0) 100%) !important;
            border: 1px solid rgba(212, 175, 55, 0.6) !important;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.15) !important;
            transform: scale(1.05); z-index: 10;
        }
        .schedule-item.active h3 { color: #fbf5c4 !important; }
        .schedule-item.active p { color: white !important; text-shadow: 0 0 10px rgba(212, 175, 55, 0.5); }

        /* OVERRIDE SCENE THEMES */
        .dynamic-bg { transition: background 1s ease; }
        .theme-red { background: radial-gradient(circle at center, #450a0a 0%, #000 100%); --accent: #ef4444; }
        .theme-green { background: radial-gradient(circle at center, #064e3b 0%, #000 100%); --accent: #10b981; }
        .theme-gold { background: radial-gradient(circle at center, #422006 0%, #000 100%); --accent: #d4af37; }
        /* FRIDAY THEME (Platinum/Silver) */
        .theme-jumat { background: radial-gradient(circle at center, #1c1c1c 0%, #000 100%); --accent: #e2e8f0; }
    </style>
</head>
<body>

    <div class="islamic-pattern opacity-30"></div>
    <div class="fixed top-[-20%] left-[-10%] w-[50vw] h-[50vw] bg-brand-900/20 rounded-full blur-[150px] animate-pulse"></div>
    <div class="fixed bottom-[-20%] right-[-10%] w-[60vw] h-[60vw] bg-gold-600/10 rounded-full blur-[150px] animate-pulse" style="animation-delay: 2s"></div>

    <div class="fixed top-0 left-0 w-full h-[2px] z-50 bg-white/5">
        <div id="slide-progress" class="h-full bg-gradient-to-r from-gold-400 via-white to-gold-400 shadow-[0_0_20px_rgba(212,175,55,0.8)] transition-all duration-300 ease-linear w-0"></div>
    </div>

    <div class="main-layout relative z-10">
        
        <header class="glass-panel h-[16vh] px-8 grid grid-cols-12 gap-6 items-center rounded-2xl relative overflow-hidden">
            <div class="col-span-4 flex items-center gap-6 border-r border-white/10 pr-6 h-3/4">
                <img src="logo-putih-muallimin.webp" alt="Logo" class="h-20 w-auto object-contain drop-shadow-lg" onerror="this.style.display='none';">
                <div class="flex flex-col justify-center">
                    <h1 class="font-cinzel font-bold text-2xl tracking-widest uppercase leading-none mb-1 text-gold-gradient">Masjid Mu'allimin</h1>
                    <span class="text-slate-400 text-[10px] tracking-[0.4em] uppercase">Yogyakarta</span>
                </div>
            </div>

            <div class="col-span-4 flex flex-col items-center justify-center">
                <div class="flex items-center gap-3 mb-1">
                    <i class="ri-calendar-line text-gold-400"></i>
                    <span id="header-date-masehi" class="font-sans font-bold text-xl text-slate-200 tracking-wide">...</span>
                </div>
                <div class="w-20 h-[1px] bg-gradient-to-r from-transparent via-gold-500/50 to-transparent my-1"></div>
                <div class="flex items-center gap-3">
                    <span id="header-date-hijri" class="font-serif text-xl text-gold-300 tracking-wide">...</span>
                </div>
            </div>

            <div class="col-span-4 flex flex-col items-end justify-center pl-6 border-l border-white/10 h-3/4 relative">
                 <div class="absolute top-0 right-0 bg-gold-900/30 px-3 py-1 rounded-bl-lg border-b border-l border-gold-500/20 backdrop-blur-sm">
                    <span class="text-[0.6rem] font-bold text-gold-300 uppercase tracking-widest animate-pulse">Menuju <span id="header-next-name">...</span></span>
                </div>
                <div id="header-clock" class="text-7xl font-mono font-bold text-white tracking-tighter leading-none mt-4 drop-shadow-2xl tabular-nums">00:00</div>
                <div class="flex items-center gap-2 mt-[-5px]">
                    <span class="text-xs text-slate-500 uppercase tracking-widest">Sisa Waktu</span>
                    <div id="header-countdown" class="text-xl font-mono font-bold text-brand-400 tracking-widest tabular-nums">-00:00:00</div>
                </div>
            </div>
        </header>

        <main class="relative w-full h-full overflow-hidden glass-panel rounded-3xl flex flex-col justify-center items-center">
            
            <div id="scene-home" class="w-full h-full flex flex-col items-center justify-center animate-fade-in relative overflow-hidden">
                <div class="absolute inset-0 flex items-center justify-center opacity-10 pointer-events-none">
                     <div class="w-[800px] h-[800px] border-[1px] border-gold-500/30 rounded-full animate-spin-slow" style="border-style: dashed;"></div>
                     <div class="absolute w-[600px] h-[600px] border-[1px] border-white/10 rounded-full animate-spin-slow" style="animation-direction: reverse;"></div>
                </div>

                <div class="relative z-10 mb-6">
                    <h2 class="text-2xl text-gold-400 font-cinzel font-medium tracking-[0.8em] uppercase text-center flex items-center gap-4">
                        <span class="w-12 h-[1px] bg-gold-400"></span>
                        Ahlan Wa Sahlan
                        <span class="w-12 h-[1px] bg-gold-400"></span>
                    </h2>
                </div>
                
                <div class="relative z-10 text-center">
                    <h1 class="text-[6rem] lg:text-[8rem] font-cinzel font-black text-transparent bg-clip-text bg-gradient-to-b from-white via-slate-200 to-slate-400 leading-[0.85] tracking-tight drop-shadow-2xl">
                        MASJID JAMI'
                    </h1>
                    <h1 class="text-[6rem] lg:text-[8rem] font-cinzel font-black text-gold-gradient leading-[0.85] tracking-tight mt-2 pb-4">
                        MU'ALLIMIN
                    </h1>
                </div>

                <div class="mt-16 px-10 py-4 border-y border-white/10 bg-black/20 backdrop-blur-sm">
                    <p class="text-3xl text-slate-200 font-serif italic tracking-wider text-center">"Luruskan dan Rapatkan Shaf Sholat Anda"</p>
                </div>
            </div>

            <div id="scene-ayat" class="hidden-slide w-full h-full flex flex-col items-center justify-center animate-fade-in px-20 text-center relative">
                <div class="absolute top-10 left-1/2 -translate-x-1/2">
                    <div class="px-6 py-2 rounded-full border border-gold-500/30 bg-gold-900/10 text-gold-400 uppercase tracking-[0.3em] text-sm font-bold flex items-center gap-2">
                        <i class="ri-book-open-line"></i> Kalamullah
                    </div>
                </div>
                
                <div class="relative py-12 px-20 border-x border-white/5 bg-gradient-to-b from-transparent via-white/5 to-transparent">
                    <p id="ayat-arabic" class="text-6xl lg:text-7xl font-serif text-white leading-[2.2] mb-10 dir-rtl text-glow-white" style="direction: rtl;">...</p>
                    <div class="w-20 h-1 bg-gold-500 mx-auto mb-10 rounded-full"></div>
                    <p id="ayat-text" class="text-3xl lg:text-4xl font-sans font-light text-slate-300 leading-relaxed italic max-w-5xl mx-auto">...</p>
                </div>

                <p id="ayat-source" class="absolute bottom-16 text-2xl font-cinzel font-bold text-gold-500 uppercase tracking-widest">...</p>
            </div>

            <div id="scene-hadits" class="hidden-slide w-full h-full flex flex-col items-center justify-center animate-fade-in px-20 text-center relative">
                <div class="absolute top-10 left-1/2 -translate-x-1/2">
                    <div class="px-6 py-2 rounded-full border border-brand-500/30 bg-brand-900/10 text-brand-400 uppercase tracking-[0.3em] text-sm font-bold flex items-center gap-2">
                        <i class="ri-double-quotes-l"></i> Hadits
                    </div>
                </div>

                <div class="relative py-12 px-20">
                     <p id="hadits-arabic" class="text-6xl lg:text-7xl font-serif text-white leading-[2.2] mb-10 dir-rtl text-glow-white" style="direction: rtl;">...</p>
                     <p id="hadits-text" class="text-3xl lg:text-4xl font-sans font-light text-slate-300 leading-relaxed max-w-5xl mx-auto">...</p>
                </div>

                <p id="hadits-source" class="absolute bottom-16 text-2xl font-cinzel font-bold text-brand-500 uppercase tracking-widest">...</p>
            </div>

        </main>

        <footer class="glass-panel h-[20vh] p-4 z-30 rounded-2xl">
            <div id="footer-schedule">
                </div>
        </footer>
    </div>

    <div id="scene-countdown" class="hidden-slide fixed inset-0 z-50 bg-black flex flex-col items-center justify-center text-center overflow-hidden dynamic-bg">
         <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/arabesque.png')] z-0"></div>
         
         <div class="relative z-10 flex flex-col items-center scale-110">
             <div class="mb-10 border-y border-white/20 py-4 px-12 bg-black/20 backdrop-blur-md">
                 <h2 id="countdown-title" class="text-5xl font-cinzel font-bold uppercase tracking-[0.4em] text-white drop-shadow-lg">Menuju Adzan</h2>
             </div>
             
             <h1 id="countdown-name" class="text-[12vh] font-cinzel font-black text-gold-gradient leading-none tracking-wide drop-shadow-2xl mb-8 uppercase">ASHAAR</h1>
             
             <div class="relative flex items-center justify-center">
                 <div class="absolute w-[50vh] h-[50vh] border-[2px] border-white/20 rounded-full animate-spin-slow"></div>
                 <div class="absolute w-[45vh] h-[45vh] border-[1px] border-dashed border-white/40 rounded-full animate-spin-slow" style="animation-direction: reverse; animation-duration: 15s;"></div>
                 
                 <span id="countdown-timer" class="text-[28vh] font-mono font-bold tabular-nums leading-none tracking-tighter text-white drop-shadow-2xl">00:00</span>
             </div>
             
             <p class="mt-12 text-white/70 text-xl uppercase tracking-[0.3em] font-sans font-light">Persiapkan Diri Menghadap Sang Khaliq</p>
         </div>
    </div>

    <div id="scene-prayer" class="hidden-slide fixed inset-0 z-[60] bg-black flex flex-col items-center justify-center text-center px-10 overflow-hidden dynamic-bg">
        <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/arabesque.png')] z-0"></div>
        
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 opacity-5 select-none pointer-events-none">
            <span class="text-[40vw] font-mono font-bold text-white tracking-tighter leading-none">00:00</span>
        </div>

        <div class="relative z-10 flex flex-col items-center justify-between h-[80vh] w-full max-w-6xl">
            
            <div class="flex flex-col items-center">
                <div id="prayer-icon-container" class="w-24 h-24 rounded-full border-2 border-white/20 flex items-center justify-center mb-8 bg-white/5 backdrop-blur-lg animate-pulse">
                    <i id="prayer-icon" class="ri-notification-off-line text-5xl text-white"></i>
                </div>
                <h1 class="text-[8vh] font-cinzel font-black text-white uppercase tracking-widest leading-none drop-shadow-2xl" id="prayer-title">
                    Sholat Berlangsung
                </h1>
            </div>

            <div class="my-auto relative w-full">
                <div id="prayer-clock-container">
                    <span class="relative z-10 text-[22vh] font-mono font-black text-gold-gradient tracking-tighter tabular-nums drop-shadow-2xl">00:00</span>
                </div>

                <div id="prayer-khutbah-container" class="hidden text-center">
                    <p class="text-4xl text-slate-300 font-serif leading-relaxed mb-6">
                        "Apabila engkau berkata kepada temanmu 'Diamlah' di hari Jumat ketika imam sedang berkhutbah, maka sungguh engkau telah sia-sia (pahala Jumatmu)."
                    </p>
                    <div class="w-full h-[1px] bg-gradient-to-r from-transparent via-gold-500 to-transparent opacity-50 mb-6"></div>
                    <div class="inline-block px-8 py-3 border border-white/20 rounded-full bg-white/5 animate-pulse">
                        <span class="text-xl uppercase tracking-[0.2em] font-bold text-gold-300">Harap Diam & Dengarkan</span>
                    </div>
                </div>
            </div>
            
            <div class="w-full border-y border-white/10 py-8 bg-black/40 backdrop-blur-md">
                <p class="text-5xl text-white font-sans font-bold tracking-wide mb-3" id="prayer-sub">
                    Luruskan & Rapatkan Shaf
                </p>
                <p class="text-xl text-slate-400 uppercase tracking-[0.3em]" id="prayer-note">
                    Mohon Matikan Alat Komunikasi
                </p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // LOGIKA EXTENDED UNTUK OVERRIDE DAN JUMAT
        const originalApplyMode = window.applyMode || function(){}; // Fallback

        // Setup Schedule UI Dummy (Biar kelihatan previewnya jika script.js belum load)
        const times = ['Subuh', 'Syuruq', 'Dzuhur', 'Ashar', 'Maghrib', 'Isya'];
        const scheduleContainer = document.getElementById('footer-schedule');
        scheduleContainer.style.gridTemplateColumns = `repeat(${times.length}, 1fr)`;
        
        times.forEach((t, i) => {
            const div = document.createElement('div');
            div.className = `schedule-item ${t === 'Ashar' ? 'active' : ''}`; // Dummy active
            div.innerHTML = `<h3 class="font-cinzel text-xs font-bold text-slate-500 uppercase tracking-widest mb-1">${t}</h3><p class="font-mono text-3xl font-bold text-slate-300">00:00</p>`;
            scheduleContainer.appendChild(div);
        });

        // OVERRIDE FUNCTION
        window.applyMode = function(mode, type, target, meta) {
            STATE.mode = mode;
            STATE.overrideType = type;
            
            // Elements
            const elsOverride = {
                cd: document.getElementById('scene-countdown'),
                pr: document.getElementById('scene-prayer'),
                prTitle: document.getElementById('prayer-title'),
                prSub: document.getElementById('prayer-sub'),
                prNote: document.getElementById('prayer-note'),
                prIcon: document.getElementById('prayer-icon'),
                clockCont: document.getElementById('prayer-clock-container'),
                khutbahCont: document.getElementById('prayer-khutbah-container')
            };

            // Reset Displays
            document.querySelector('header').style.display = mode === 'NORMAL' ? 'grid' : 'none';
            document.querySelector('footer').style.display = mode === 'NORMAL' ? 'block' : 'none';
            document.getElementById('scene-home').classList.add('hidden-slide');
            elsOverride.cd.classList.add('hidden-slide');
            elsOverride.pr.classList.add('hidden-slide');

            if (mode === 'NORMAL') {
                document.getElementById('scene-home').classList.remove('hidden-slide');
                // Panggil renderSlide normal (dari script.js asli)
                if(typeof renderSlide === 'function') renderSlide();
            } else {
                // OVERRIDE MODES
                
                // 1. COUNTDOWN (ADZAN / IQAMAH)
                if (type === 'ADZAN' || type === 'IQAMAH') {
                    elsOverride.cd.classList.remove('hidden-slide');
                    elsOverride.cd.className = `fixed inset-0 z-50 bg-black flex flex-col items-center justify-center text-center overflow-hidden dynamic-bg ${type === 'ADZAN' ? 'theme-red' : 'theme-gold'}`;
                    
                    document.getElementById('countdown-title').innerText = type === 'ADZAN' ? 'MENUJU ADZAN' : 'MENUJU IQAMAH';
                    document.getElementById('countdown-name').innerText = meta.name || 'SHOLAT';
                    
                    if(target) updateOverlayTimer(target - new Date()); // Asumsi fungsi ini ada di script.js
                }
                
                // 2. PRAYER / KHUTBAH MODE
                else {
                    elsOverride.pr.classList.remove('hidden-slide');
                    elsOverride.clockCont.style.display = 'block'; // Default show clock
                    elsOverride.khutbahCont.style.display = 'none'; // Default hide khutbah

                    if (type === 'JUMAT') {
                        // === MODE JUMAT (1 JAM) ===
                        elsOverride.pr.className = 'fixed inset-0 z-[60] bg-black flex flex-col items-center justify-center text-center px-10 overflow-hidden dynamic-bg theme-jumat';
                        
                        elsOverride.prTitle.innerText = "KHUTBAH JUMAT";
                        elsOverride.prIcon.className = "ri-volume-off-vibrate-fill text-5xl text-white"; // Icon diam
                        
                        // Sembunyikan jam besar, tampilkan pesan khutbah
                        elsOverride.clockCont.style.display = 'none';
                        elsOverride.khutbahCont.style.display = 'block';
                        elsOverride.khutbahCont.classList.remove('hidden');

                        elsOverride.prSub.innerText = "Dengarkan Khatib";
                        elsOverride.prNote.innerText = "Barangsiapa berbicara, maka sia-sialah Jumatnya";
                    } 
                    else if (type === 'PRAYER') {
                        elsOverride.pr.className = 'fixed inset-0 z-[60] bg-black flex flex-col items-center justify-center text-center px-10 overflow-hidden dynamic-bg theme-green';
                        elsOverride.prTitle.innerText = "SHOLAT BERLANGSUNG";
                        elsOverride.prIcon.className = "ri-notification-off-fill text-5xl text-white";
                        elsOverride.prSub.innerText = "Luruskan & Rapatkan Shaf";
                        elsOverride.prNote.innerText = "Mohon Matikan Alat Komunikasi";
                    }
                }
            }
        };

        // SIMULASI TEST (Hapus ini nanti jika sudah connect backend)
        // Uncomment baris di bawah untuk melihat tampilan JUMAT:
        // setTimeout(() => window.applyMode('OVERRIDE', 'JUMAT', null, {name: 'Jumat'}), 2000);
    </script>
</body>
</html>
